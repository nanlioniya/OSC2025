Search.setIndex({"docnames": ["class/staff", "index", "labs/hardware/asm", "labs/hardware/index", "labs/hardware/mailbox", "labs/hardware/uart", "labs/lab0", "labs/lab1", "labs/lab2", "labs/lab3", "labs/lab4", "labs/lab5", "labs/lab6", "labs/lab7", "labs/lab8", "labs/overview", "references/external_resources", "references/old_course"], "filenames": ["class/staff.rst", "index.rst", "labs/hardware/asm.rst", "labs/hardware/index.rst", "labs/hardware/mailbox.rst", "labs/hardware/uart.rst", "labs/lab0.rst", "labs/lab1.rst", "labs/lab2.rst", "labs/lab3.rst", "labs/lab4.rst", "labs/lab5.rst", "labs/lab6.rst", "labs/lab7.rst", "labs/lab8.rst", "labs/overview.rst", "references/external_resources.rst", "references/old_course.rst"], "titles": ["Staff", "Welcome to Operating System Capstone, Spring 2024!", "The Assembly You Need", "Hardware", "Mailbox", "UART", "Lab 0: Environment Setup", "Lab 1: Hello World", "Lab 2: Booting", "Lab 3: Exception and Interrupt", "Lab 4: Allocator", "Lab 5: Thread and User Process", "Lab 6: Virtual Memory", "Lab 7: Virtual File System", "Lab 8: Non-volatile Storage", "Overview", "External Resourses", "Old Course Websites"], "terms": {"tsung": 0, "tai": 0, "yeh": 0, "email": 0, "ttyeh": 0, "c": [0, 6, 16], "nycu": [0, 17], "edu": 0, "tw": 0, "locat": [0, 1, 10, 14], "ec707": 0, "cheng": 0, "hsi": 0, "liu": 0, "brianliu": 0, "cs11": 0, "ec619": 0, "jeng": 0, "bang": 0, "tsai": 0, "cs12": 0, "kai": 0, "chieh": 0, "hsu": 0, "kaijhsu": 0, "wei": 0, "hsun": 0, "huang": 0, "vic900511": 0, "thi": [1, 2, 15, 17], "cours": [1, 2, 6, 15, 16], "aim": 1, "introduc": [1, 8, 9, 10, 12], "design": [1, 8, 9, 10, 12, 13, 14, 15, 17], "implement": [1, 4, 7, 8, 9, 10, 12, 13, 14, 15, 17], "kernel": [1, 9, 10, 13, 14, 15], "you": [1, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17], "ll": [1, 6, 7, 8, 10, 11, 13, 14, 15], "learn": [1, 2, 8, 11, 15], "both": [1, 5, 7, 9, 12], "concept": [1, 12], "from": [1, 4, 5, 8, 9, 10, 11, 12, 13, 14], "seri": 1, "lab": [1, 4], "us": [1, 4, 5, 6, 7, 8, 9, 10, 11, 13, 14, 15], "raspberri": [1, 6, 8, 11, 16], "pi": [1, 6, 8, 11, 16], "3": [1, 4, 5, 11, 14], "model": 1, "b": [1, 2, 4, 6, 8, 9], "rpi3": [1, 4, 5, 7, 10, 15], "short": [1, 9], "hardwar": [1, 6, 9, 11], "platform": 1, "student": 1, "can": [1, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17], "get": [1, 4, 5, 8, 9, 10, 11, 12, 13, 15], "hand": [1, 10, 11, 15], "dirti": [1, 14], "real": [1, 4, 7, 14, 15], "machin": [1, 6, 8, 11], "instead": [1, 4, 5, 8, 11, 13, 15], "an": [1, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15], "emul": [1, 6, 15], "titl": 1, "time": [1, 4, 5, 6, 9, 10, 11, 12, 14, 15], "10": [1, 13], "12": [1, 9, 12, 13, 14], "00": 1, "pm": 1, "mon": 1, "ed": 1, "302": 1, "5": [1, 4, 8, 9, 10, 12, 13], "6": [1, 4, 5, 9, 11, 13], "ec": 1, "707": 1, "demo": [1, 10, 11, 15], "7": [1, 4, 9, 11, 12], "9": [1, 4, 9, 11, 13], "thur": 1, "222": 1, "websit": [1, 6, 8, 15, 16], "link": [1, 6], "check": [1, 4, 5, 7, 8, 9, 10, 11, 12, 14, 15, 17], "schedul": [1, 9], "slide": [1, 16], "document": [1, 6, 9, 11, 12, 13], "i": [1, 2, 4, 5, 6, 7, 10, 11, 12, 13, 14, 15], "self": 1, "contain": [1, 4, 6, 10, 11, 12], "more": [1, 2, 6, 7, 8, 9, 11, 14], "inform": [1, 2, 6, 9, 10, 11, 13, 14], "extern": [1, 14], "refer": [1, 2, 4, 5, 7, 13, 16], "although": [2, 6, 14], "about": [2, 5, 6, 7, 10, 11], "languag": [2, 15], "still": [2, 6, 8, 9, 10, 11, 12, 15], "write": [2, 4, 8, 11, 15], "some": [2, 4, 5, 6, 7, 8, 9, 10, 11, 15, 16], "bare": [2, 6, 7, 16], "metal": [2, 6, 7, 16], "program": [2, 6, 7, 8, 9, 10, 12, 13, 15], "here": [2, 11, 12, 13], "we": [2, 4, 5, 6, 8, 9, 10, 11, 12, 13, 14, 15], "provid": [2, 4, 5, 6, 7, 8, 10, 11, 12, 13, 14], "piec": [2, 11], "code": [2, 5, 7, 8, 9, 10, 11, 12, 13, 14, 15], "possibli": 2, "after": [2, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15], "copi": [2, 9, 11, 15], "past": [2, 15], "look": [2, 9, 12, 13, 14], "up": [2, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15], "manual": [2, 5, 8, 9, 12], "understand": [2, 4, 6, 7, 8, 9, 11, 12, 13, 14], "how": [2, 4, 5, 7, 9, 11, 12, 13, 14, 15], "work": [2, 7, 10, 11, 12, 15], "might": [2, 4, 6, 8, 12, 13, 14, 15, 17], "other": [2, 8, 9, 10, 11, 12, 13, 14, 15], "achiev": [2, 9, 11, 12], "extra": [2, 10], "function": [2, 5, 6, 8, 9, 10, 11, 12], "pleas": [2, 4, 5, 9, 11, 12], "two": [2, 6, 7, 8, 9, 11, 12], "http": [5, 6, 9, 16, 17], "static": 10, "doc": [5, 9], "arm": [4, 5, 6, 7, 9, 12, 13], "com": [6, 16], "100898": [], "0100": [], "the_a64_instruction_set_100898_0100": 2, "pdf": [2, 5, 9], "ddi0596": [], "ddi_0596_arm_a64_instruction_set_architectur": 2, "ddi0487": [], "ea": [], "ddi0487e_a_armv8_arm": 2, "enter": [2, 9, 11], "busi": [2, 9, 11], "loop": [2, 14], "_start": [2, 6, 9], "wfe": [2, 6], "set": [2, 4, 5, 6, 7, 9, 10, 11, 12, 13, 14], "stack": [2, 7, 9, 11, 12], "pointer": [2, 7, 8, 9, 10, 11, 13], "branch": [2, 9, 12], "main": [2, 8], "2": [2, 4, 5, 6, 15], "ldr": [2, 9, 11, 12], "x0": [2, 8, 9, 11, 12], "_stack_top": 2, "mov": [2, 9, 11, 12], "sp": [2, 9, 11], "bl": [2, 9], "1b": [2, 9], "commun": [4, 7, 11], "mechan": [4, 9, 11, 12, 14], "between": [4, 7, 8, 9, 10, 11, 12, 14], "videocoreiv": [4, 7], "gpu": [4, 6, 7, 8, 9, 12, 13], "configur": [4, 5, 6, 7, 8, 9, 14], "peripher": [4, 5, 7, 12], "onli": [4, 7, 8, 9, 10, 11, 12, 13, 14, 15], "list": [4, 7, 11, 12], "materi": [4, 11], "need": [4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 17], "For": [4, 5, 8, 9, 10, 11, 12, 13, 14, 15], "detail": [4, 5, 8, 9, 12, 15], "raspberrypi": [4, 6, 9, 16], "firmwar": [4, 6], "The": [4, 5, 7, 8, 9, 10, 12, 13, 14], "consist": [4, 10], "three": [4, 12, 14], "compon": [4, 9, 11, 14], "regist": [4, 5, 6, 8, 9, 11, 13], "channel": [4, 13], "messag": [4, 9], "ar": [4, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16], "access": [4, 5, 7, 8, 9, 10, 11, 12, 13, 14], "mmio": [4, 12], "0": [4, 5, 7, 8, 9, 10, 11, 12, 13], "read": [4, 8, 11, 12], "cpu": [4, 5, 6, 7, 8, 9, 11, 12, 14], "statu": [4, 9, 10, 11, 14], "1": [4, 5, 6, 15], "defin": [4, 7, 9, 10, 11, 12, 13], "sever": [4, 5, 10], "8": [4, 5, 8, 9, 11, 12, 13, 15], "To": [4, 5, 6, 8, 9, 10, 11, 12, 14], "pass": [4, 8, 11, 13], "prepar": [4, 6, 9], "arrai": [4, 9, 10], "Then": [4, 5, 6, 8, 9, 10, 11, 12, 13, 14], "appli": [4, 11], "follow": [4, 6, 7, 8, 9, 10, 11, 12, 13, 14], "step": [4, 6, 8, 12, 13], "combin": [4, 12], "address": [4, 5, 7, 8, 9, 10, 11, 12, 13], "upper": [4, 12, 14], "28": [4, 13], "bit": [4, 5, 6, 11, 12, 14], "number": [4, 7, 9, 11, 12, 13, 14], "lower": [4, 9, 12], "4": [4, 8, 9, 11, 12], "": [4, 5, 6, 8, 10, 14, 15, 16], "full": [4, 7, 14], "flag": [4, 5, 12, 13], "If": [4, 5, 6, 7, 9, 10, 11, 12, 14, 15], "empti": [4, 5, 10, 14], "valu": [4, 5, 7, 10, 11, 12, 13, 14], "same": [4, 5, 6, 9, 10, 11, 12, 13], "wrote": 4, "becaus": [4, 5, 6, 8, 9, 10, 11, 12], "could": [4, 6, 7, 9, 11, 12, 13], "should": [4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15], "correctli": [4, 7, 9, 11, 12], "align": [4, 7, 9, 10, 12, 13], "mmio_bas": 4, "0x3f000000": [4, 5], "mailbox_bas": 4, "0xb880": 4, "mailbox_read": 4, "mailbox_statu": 4, "0x18": 4, "mailbox_writ": 4, "0x20": [4, 7], "mailbox_empti": 4, "0x40000000": [4, 12], "mailbox_ful": 4, "0x80000000": 4, "properti": [4, 8], "interfac": [4, 8, 9, 13], "indic": [4, 11], "differ": [4, 5, 7, 9, 11, 12, 13, 14, 15, 17], "oper": [4, 6, 9, 10, 11, 13, 16, 17], "specif": [4, 5, 8, 10, 11, 13], "below": [4, 6, 9, 10, 11], "exampl": [4, 7, 8, 9, 10, 11, 12, 13, 14], "board": [4, 7], "revis": [4, 7], "get_board_revis": 4, "0x00010002": 4, "request_cod": 4, "0x00000000": [4, 12], "request_succe": 4, "request_fail": 4, "0x80000001": 4, "tag_request_cod": 4, "end_tag": 4, "void": [4, 7, 8, 10, 11, 12, 13, 14], "unsign": [4, 7, 11, 13], "int": [4, 7, 8, 11, 12, 13], "buffer": [4, 8, 9, 10, 11, 13], "size": [4, 5, 7, 8, 9, 11, 12, 13, 14], "byte": [4, 9, 11, 12, 13, 14], "begin": [4, 7, 9], "identifi": [4, 11], "maximum": [4, 10], "request": [4, 8, 10, 13, 15], "respons": [4, 10], "length": [4, 13, 14], "end": [4, 9, 10, 13], "mailbox_cal": 4, "procedur": [4, 10], "call": [4, 7, 8, 9, 10, 12, 14], "abov": [4, 7, 9, 10, 11, 12], "printf": [4, 11, 12], "0x": 4, "x": [4, 9, 10, 11, 12], "n": [4, 7, 11, 12, 13], "0xa020d3": 4, "ha": [4, 5, 7, 8, 9, 10, 11, 12, 13], "displai": [4, 6, 11], "output": [4, 5, 6, 7, 11, 13], "which": [4, 9, 11, 12, 13, 14, 15], "control": [4, 5, 11, 13], "show": [4, 13, 15], "imag": [4, 8, 10, 14], "text": [4, 5, 6, 7, 8, 9, 10, 12], "your": [4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15], "screen": [4, 6, 7, 13], "There": [4, 5, 6, 7, 8, 10, 13, 14, 15], "item": [4, 10], "them": [4, 5, 6, 7, 9, 10, 11, 12, 13, 14, 15], "brief": [4, 10], "explan": [4, 12], "experi": [4, 8], "better": [4, 9, 10, 14], "alloc": [4, 11, 14], "memori": [4, 5, 6, 7, 8, 11, 13], "base": [4, 7, 9, 10, 12, 13], "pixel": [4, 13], "color": [4, 13], "accord": [4, 9, 12], "its": [4, 5, 7, 8, 9, 10, 11, 12, 13, 14], "return": [4, 8, 9, 10, 11, 12, 13, 14], "bitwis": 4, "AND": 4, "0x3fff_ffff": 4, "physic": [4, 5, 7, 10, 12, 13], "width": [4, 13], "height": [4, 13], "virtual": [4, 10, 11], "A": [4, 6, 8, 9, 10, 11, 12, 13, 14], "portion": 4, "send": [4, 8, 9, 11, 15], "offset": [4, 12, 13], "bigger": 4, "than": [4, 9, 10, 13, 14], "decid": [4, 12], "part": [4, 6, 8, 9, 10, 11, 12, 13, 14], "sent": [4, 9], "depth": [4, 13], "mani": [4, 11, 12], "repres": [4, 10, 11, 13], "order": [4, 8, 9, 10, 11, 12, 13], "either": [4, 6, 8, 9, 10, 14], "rgb": [4, 13], "bgr": [4, 13], "pitch": [4, 13], "store": [4, 5, 11, 12, 13, 14], "per": [4, 13, 15], "horizont": 4, "line": [4, 5, 9, 13], "draw": 4, "k": 4, "th": [4, 10], "row": 4, "skip": 4, "overview": 5, "cs140e": [5, 9], "sergio": [5, 9], "bz": [5, 9], "bcm2837": [5, 9], "through": [5, 6, 7, 8, 9, 11, 13, 14], "map": [5, 10, 13], "input": [5, 7], "when": [5, 7, 9, 10, 11, 13, 14], "load": [5, 6, 7, 9, 11, 12, 14], "therefor": [5, 9, 10, 11, 12], "videocor": 5, "mmu": [5, 12], "translat": [5, 10, 13], "bu": [5, 8], "0x7e000000": 5, "In": [5, 6, 7, 8, 9, 10, 11, 12, 13, 14], "howev": [5, 7, 8, 9, 10, 11, 12, 14, 15], "one": [5, 6, 8, 9, 10, 11, 12, 13, 14], "basic": [5, 6, 15], "devic": [5, 6, 8, 10, 11, 12, 14], "led": 5, "button": [5, 7], "besid": [5, 6, 8, 9, 12, 14], "altern": [5, 9, 11], "spi": 5, "befor": [5, 6, 8, 9, 10, 11, 12, 14, 15], "pin": [5, 6], "correspond": [5, 6, 8, 9, 11, 12, 13], "mode": [5, 11, 12, 13], "14": [5, 9, 12, 13], "15": [5, 9], "alt5": 5, "alt0": 5, "gpfseln": 5, "chang": [5, 12, 13, 14], "next": [5, 6, 9, 11, 12, 13], "pull": [5, 15], "down": 5, "disabl": [5, 9, 11, 12], "It": [5, 6, 8, 9, 10, 11, 12, 13, 14, 15], "descript": [5, 7, 15, 17], "gppud": 5, "gppudclkn": 5, "setup": [5, 11, 12, 13], "auxiliari": 5, "support": [5, 7, 8, 13], "limit": [5, 9, 14, 15], "auxenb": 5, "enabl": [5, 11, 12], "aux_mu_cntl_reg": 5, "transmitt": 5, "receiv": [5, 11, 12], "dure": [5, 8, 9, 10, 11, 12, 13, 14, 15, 17], "aux_mu_ier_reg": [5, 9], "current": [5, 8, 9, 11, 12], "don": [5, 6, 8, 9, 10, 11, 12, 13, 14], "t": [5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15], "aux_mu_lcr_reg": 5, "aux_mu_mcr_reg": 5, "auto": [5, 13], "flow": 5, "aux_mu_baud": 5, "270": 5, "baud": [5, 6], "rate": [5, 6, 7], "115200": [5, 6], "boot": [5, 6, 7, 9, 10, 11, 14], "system": [5, 6, 8, 9, 12, 15, 16, 17], "clock": [5, 7], "250": 5, "mhz": 5, "frac": 5, "systemx": 5, "freq": 5, "aux_mu_iir_reg": 5, "No": [5, 13], "fifo": [5, 9, 13], "aux_mu_lsr_reg": 5, "readi": [5, 9, 11], "field": 5, "aux_mu_io_reg": 5, "tx": [5, 6, 9], "rx": [5, 6, 9], "caus": [5, 9, 11, 12], "register1": 5, "page": [5, 8, 9, 11, 14, 16], "116": 5, "29": [5, 13], "aux": 5, "By": 5, "default": [5, 6, 8, 9, 11, 13], "qemu": [5, 7, 8, 9, 11, 15], "uart0": 5, "serial": [5, 6, 8], "io": [5, 7, 8, 11, 12, 17], "want": [5, 8, 9, 11, 14], "uart1": 5, "null": [5, 8, 12], "stdio": 5, "first": [5, 6, 8, 9, 10, 11, 12, 13, 14], "mailbox": [5, 11, 12, 13], "similar": [5, 14], "frequenc": [5, 9, 11], "almost": 5, "ibrd": 5, "fbrd": 5, "lcrh": 5, "cr": 5, "fr": 5, "dr": 5, "imsc": 5, "mi": 5, "icr": 5, "clear": [5, 12], "automat": [5, 12], "register2": 5, "117": 5, "25": [5, 13], "futur": 6, "instal": 6, "target": [6, 8, 9, 13, 14], "toolchain": 6, "build": [6, 8], "what": [6, 8, 9, 11, 12, 13, 15, 17], "test": [6, 8, 9, 12], "introductori": 6, "won": [6, 11, 13, 14], "final": [6, 11], "grade": 6, "finish": [6, 9, 11, 12, 15], "all": [6, 7, 8, 9, 10, 11, 12, 13, 14], "troubl": 6, "cortex": 6, "a53": 6, "64": [6, 12], "non": [6, 9, 11, 12], "arm64": 6, "host": [6, 7, 8], "comput": [6, 7, 8, 9, 14], "notic": 6, "exist": [6, 12, 13, 14], "script": [6, 7, 8, 11, 12], "ld": 6, "verbos": 6, "content": [6, 8, 9, 11, 12], "layout": 6, "yourself": [6, 10, 15], "incomplet": 6, "extend": 6, "section": [6, 10, 11, 12], "0x80000": [6, 7, 8, 12], "easier": [6, 14], "valid": [6, 12, 13, 15], "option": [6, 8, 10], "doesn": [6, 7, 9, 10, 11, 13], "behav": [6, 9, 11, 12, 13], "too": [6, 9, 14], "aarch64": [6, 8, 9], "have": [6, 9, 10, 11, 12, 13, 15], "knowledg": 6, "now": [6, 9, 11, 12, 13], "practic": [6, 7], "convert": [6, 13], "save": [6, 11], "assembli": 6, "linux": [6, 8, 12, 16], "gnu": 6, "gcc": 6, "Or": 6, "would": [6, 10, 11, 12], "like": [6, 8, 9, 11, 12, 13], "also": [6, 8, 9, 10, 11, 12, 13, 14], "try": [6, 10, 12], "llvm": 6, "clang": 6, "mcpu": 6, "especi": 6, "maco": 6, "execut": [6, 7, 8, 9, 11, 12], "loader": [6, 12], "usual": [6, 8, 9, 12, 13, 14], "regular": [6, 10, 13, 14], "bootload": [6, 7, 14], "previou": [6, 8, 9, 10, 11, 12, 13, 14, 17], "run": [6, 8, 9, 10, 12, 14], "command": [6, 7, 8, 9, 11], "On": [6, 11], "o": [6, 8, 10, 13, 16], "kernel8": [6, 7, 14], "lld": 6, "m": 6, "aarch64elf": 6, "henc": [6, 7, 8, 9, 10, 11, 12, 13, 14, 15], "raw": [6, 8, 13, 14], "binari": [6, 8], "objcopi": 6, "img": [6, 7, 8, 13, 14], "kernle8": 6, "see": [6, 12, 15, 17], "dump": 6, "raspi3b": 6, "none": 6, "d": [6, 9, 11, 14], "in_asm": 6, "least": [6, 7, 9, 11, 14], "stuff": [6, 11], "fat16": [6, 8], "32": [6, 8, 9, 10, 13, 14], "partit": [6, 8, 10], "wai": [6, 8, 9, 10, 11, 13], "do": [6, 9, 11, 14, 15, 17], "alreadi": [6, 10, 11, 12], "dd": [6, 14], "nycuo": 6, "dev": [6, 8], "sdb": 6, "replac": [6, 9], "lsblk": [6, 14], "fat32": [6, 13], "filesystem": [6, 8, 13, 14], "insid": [6, 8, 14], "mount": [6, 8], "disk": [6, 14], "download": [6, 8], "bootcod": [6, 8], "bin": [6, 8], "fixup": 6, "dat": 6, "start": [6, 7, 8, 9, 10, 11, 12, 13], "essenti": [6, 11, 12], "pi3": 6, "offici": [6, 8], "www": 6, "org": [6, 16], "boot_fold": 6, "md": 6, "bootmod": 6, "readm": 6, "put": [6, 8, 9, 10, 11, 13, 14], "fat": 6, "mkf": 6, "f": [6, 9, 10, 13], "creat": [6, 8, 9, 10, 12, 15], "type": [6, 11, 13, 14, 15], "method": [6, 8, 11, 12, 14], "our": [6, 11, 12], "echo": 6, "uart": 6, "kit": 6, "well": [6, 10, 11], "ident": [6, 11], "plug": 6, "usb": [6, 8], "open": [6, 8], "consol": [6, 13], "putti": 6, "correct": [6, 7, 8, 9, 10, 11, 12], "connect": [6, 8, 11], "gnd": 6, "turn": [6, 8, 10], "power": [6, 8, 14], "letter": 6, "print": [6, 7, 9, 10, 11, 12, 14], "just": [6, 9, 10, 11, 13], "ttyusb0": [6, 8], "rel": [6, 13], "expos": 6, "debugg": 6, "wait": [6, 9], "gdb": [6, 9], "remot": 6, "1234": 6, "log": [6, 10, 12], "jtag": 6, "metebalci": 6, "blog": 6, "3b": 6, "let": [7, 11], "requir": [7, 9, 10, 14, 15, 17], "data": [7, 8, 9, 11, 12, 13, 14], "present": [7, 12], "counter": [7, 9], "bss": [7, 12], "segment": [7, 9, 10, 12], "proper": [7, 9, 14], "booload": 7, "linker": [7, 8, 11, 12], "met": 7, "properli": 7, "veri": [7, 8], "otherwis": [7, 9, 11, 12, 14], "mai": [7, 8, 9, 10, 11, 12, 13, 15, 17], "lead": [7, 9], "undefin": 7, "behavior": 7, "bridg": 7, "pl011": 7, "interact": [7, 14], "abl": [7, 8, 10, 11, 13], "help": [7, 12], "avail": [7, 10, 11, 13], "issu": [7, 9, 15], "think": 7, "r": [7, 11, 13, 14], "framebuff": 7, "routin": 7, "easiest": 7, "thing": [7, 9, 12, 14, 15], "done": 7, "verifi": [7, 10], "origin": [7, 8, 11, 12, 14], "reset": [7, 8], "snippet": 7, "pm_password": 7, "0x5a000000": 7, "pm_rstc": 7, "0x3f10001c": 7, "pm_wdog": 7, "0x3f100024": 7, "long": [7, 9, 10, 11, 13], "addr": [7, 12], "volatil": [7, 11], "point": [7, 8, 11, 12, 13], "tick": [7, 9], "watchdog": 7, "timer": 7, "expir": [7, 9, 11], "cancel_reset": 7, "add": [7, 8, 9, 10, 11, 14], "process": [8, 9, 13], "environ": 8, "variou": 8, "user": [8, 9, 10, 13, 14], "includ": 8, "subsystem": 8, "driver": [8, 13], "match": [8, 11], "init": 8, "bring": 8, "remain": [8, 11, 12], "servic": [8, 9, 11], "userspac": [8, 13], "later": [8, 9, 10], "stage": [8, 12], "rom": 8, "soc": 8, "recogn": [8, 11, 13], "file": [8, 12], "second": [8, 9, 10, 11, 12], "sd": 8, "card": 8, "l2": 8, "cach": [8, 12], "sdram": 8, "elf": [8, 12], "wake": [8, 9, 11], "anoth": [8, 9, 10, 11], "network": [8, 9], "actual": [8, 9, 13], "move": [8, 9], "often": 8, "debug": 8, "elimin": 8, "under": [8, 12], "devis": [8, 10], "protocol": 8, "rare": 8, "drop": 8, "transmiss": 8, "so": [8, 9, 10, 11, 12, 13, 14], "keep": [8, 12, 13], "effect": 8, "wb": 8, "tty": 8, "pty": 8, "pseudo": [8, 9, 13], "overlap": [8, 11, 12], "specifi": [8, 9, 10, 12, 13], "re": [8, 9, 12, 13, 15], "txt": [8, 14], "kernel_address": 8, "further": 8, "make": [8, 10, 11, 12, 13, 15], "less": [8, 9], "ambigu": 8, "name": [8, 11, 12], "arm_64bit": 8, "0x60000": 8, "low": [8, 9], "speed": 8, "okai": 8, "quit": [8, 10, 12], "small": [8, 10], "larg": [8, 10], "root": [8, 14], "haven": 8, "ani": [8, 9, 10, 11, 12, 13, 15], "storag": [8, 11, 13], "yet": [8, 10, 11, 15, 17], "anyth": 8, "approach": [8, 10], "embed": [8, 15, 16], "extract": 8, "pack": 8, "directori": [8, 12], "each": [8, 9, 10, 11, 12, 13, 14, 15], "record": [8, 10], "header": [8, 10], "pathnam": 8, "go": [8, 9, 13], "rootf": [8, 13], "cd": 8, "find": [8, 9, 13, 14, 15], "h": 8, "newc": 8, "initramf": [8, 9, 10, 14], "freebsd": 8, "man": 8, "definit": 8, "structur": [8, 11], "parser": 8, "argument": [8, 11, 13, 14], "initrd": 8, "0x8000000": 8, "0x20000000": 8, "given": [8, 10, 11, 13], "plain": 8, "autom": 8, "progress": 8, "dynam": [8, 11], "earli": 8, "continu": [8, 11], "space": [8, 10, 13], "free": [8, 11], "follo": 8, "breif": 8, "simple_malloc": 8, "size_t": [8, 11, 12, 13], "char": [8, 11, 13], "string": 8, "simple_alloc": 8, "allow": [8, 9, 11, 15], "itself": [8, 11, 13], "know": [8, 9, 11], "buse": 8, "pcie": 8, "detect": [8, 10], "queri": [8, 13], "compat": [8, 14], "One": [8, 9, 11], "drive": [8, 14, 16], "did": [8, 9], "develop": [8, 11, 15], "hard": [8, 10, 12, 13, 14], "out": [8, 10, 14], "becom": [8, 11], "portabl": [8, 14], "cleaner": 8, "describ": [8, 10], "relationship": [8, 9, 10], "deivcetre": 8, "sourc": 8, "dt": 8, "flatten": [8, 10], "tree": [8, 10], "human": 8, "readabl": [8, 12, 13], "form": 8, "compil": [8, 12, 15], "simpler": [8, 9], "faster": 8, "slow": [8, 14], "repositori": [8, 15, 17], "off": [8, 10, 14], "shelf": 8, "take": [8, 9, 11, 12, 13, 15], "callback": [8, 9], "walk": [8, 12], "entir": [8, 9, 11, 12], "node": [8, 10, 13], "latest": 8, "chapter": [8, 9, 12], "modifi": [8, 9, 12, 13, 14], "ask": [8, 10, 13, 15], "bcm2710": 8, "rpi": 8, "plu": 8, "iter": [8, 12, 13], "api": [8, 9, 10, 11, 13, 14], "own": [8, 11, 12, 13, 15], "initramfs_callback": 8, "fdt_travers": 8, "hardcod": [8, 10], "event": 9, "relinquish": [9, 11], "With": [9, 12], "error": [9, 11, 12, 13], "occur": [9, 13], "gener": [9, 10, 11, 12, 13], "forc": [9, 11], "armv8": [9, 12], "tightli": 9, "coupl": 9, "briefli": [9, 12], "d1": 9, "1496": 9, "principl": 9, "privileg": [9, 12], "resourc": [9, 11], "reduc": [9, 10, 14], "possibl": [9, 10, 11, 12, 14], "attack": 9, "surfac": 9, "secur": 9, "stabil": 9, "increas": 9, "divers": [9, 10], "applic": [9, 10, 11], "without": [9, 10, 12, 13], "crash": 9, "el": 9, "decreas": 9, "jump": 9, "instruct": [9, 11, 12], "taken": 9, "doe": [9, 11, 12, 14], "processor": 9, "state": [9, 10, 11], "pstate": 9, "spsr_elx": 9, "elr_elx": 9, "synchron": [9, 14], "serror": 9, "esr_elx": 9, "eret": 9, "restor": [9, 11, 14], "As": [9, 10, 11, 12, 13], "mention": [9, 11, 12], "vbar_elx": 9, "left": 9, "focu": 9, "irq": 9, "right": [9, 11], "happen": 9, "case": [9, 10, 11, 14], "64bit": 9, "sp_elx": 9, "currentel": 9, "while": [9, 11, 13], "alwai": [9, 11], "poll": 9, "redund": 9, "wast": [9, 11, 12], "immedi": 9, "underutil": 9, "loss": 9, "thei": [9, 10, 11, 15], "indefinit": 9, "rout": 9, "found": [9, 13], "tekki": 9, "aggreg": 9, "109": 9, "share": [9, 11, 12, 16], "corrupt": [9, 10, 11], "protect": [9, 11, 12], "temporarili": 9, "prevent": [9, 10, 11, 12], "being": [9, 10], "hcr_el2": 9, "spsr_el2": 9, "elr_el2": 9, "from_el2_to_el1": 9, "31": [9, 13], "msr": [9, 11, 12], "0x3c5": 9, "el1h": 9, "spsel": 9, "lr": [9, 11], "initi": [9, 10, 11, 12, 13, 14], "shell": [9, 11], "spsr_el1": 9, "0x3c0": 9, "elr_el1": 9, "posit": [9, 13], "sp_el0": 9, "back": [9, 10, 11, 13, 14], "But": [9, 14], "vbar_el1": 9, "exception_handl": 9, "11": [9, 12, 13], "0x800": 9, "global": [9, 11, 12], "exception_vector_t": 9, "entri": [9, 10, 12, 13], "0x80": 9, "pad": 9, "set_exception_vector_t": 9, "adr": 9, "svc": [9, 11], "esr_el1": 9, "cmp": 9, "blt": 9, "unexpectedli": 9, "That": [9, 10], "purpos": [9, 10, 11, 13], "bank": 9, "exit": [9, 11], "macro": [9, 11], "save_al": 9, "sub": 9, "stp": [9, 11], "x1": [9, 11, 12], "16": [9, 10, 11, 12, 13, 14], "x2": [9, 11, 12], "x3": [9, 12], "x4": 9, "x5": 9, "x6": 9, "x7": 9, "x8": [9, 11], "x9": [9, 11], "x10": 9, "x11": 9, "x12": 9, "x13": 9, "x14": 9, "x15": 9, "x16": 9, "x17": 9, "x18": 9, "x19": [9, 11], "x20": [9, 11], "x21": [9, 11], "x22": [9, 11], "x23": [9, 11], "x24": [9, 11], "x25": [9, 11], "x26": [9, 11], "x27": [9, 11], "13": [9, 13], "x28": [9, 11], "x29": 9, "str": [9, 11, 12], "x30": 9, "endm": 9, "load_al": 9, "ldp": [9, 11], "exception_entri": 9, "cntpct_el0": 9, "count": [9, 12, 13], "cntp_cval_el0": 9, "compar": [9, 13], "cntp_tval_el0": 9, "cntp_ctl_el0": 9, "unmask": 9, "core0_timer_irq_ctrl": 9, "0x40000040": 9, "core_timer_en": 9, "mr": [9, 11, 12], "cntfrq_el0": 9, "w0": 9, "core_timer_handl": 9, "timeout": 9, "0x3f215044": 9, "irqs1": 9, "0x3f00b210": 9, "bit29": 9, "block": [9, 12, 13], "version": 9, "daifclr": 9, "0xf": 9, "daifset": 9, "depend": [9, 10, 15], "score": [9, 15], "period": 9, "job": [9, 11], "journal": 9, "shot": 9, "sleep": 9, "softwar": [9, 11], "simpl": [9, 10, 11, 12, 14], "unit": [9, 10, 12, 14], "calcul": [9, 10, 14], "suppos": [9, 10], "1000hz": 9, "moment": 9, "1500": 9, "bad": 9, "resolut": [9, 13], "sensit": 9, "high": [9, 11], "lot": [9, 10, 12, 15], "overhead": 9, "someon": [9, 11, 12], "insert": 9, "queue": 9, "earlier": [9, 12], "reprogram": 9, "def": [9, 11], "add_tim": 9, "durat": 9, "wakeup": 9, "current_process": 9, "settimeout": 9, "multipl": [9, 11, 12], "e": [9, 10, 11, 12], "g": [9, 10, 11, 12], "those": [9, 10, 11, 13, 14], "longer": 9, "come": [9, 11, 12], "serv": 9, "starvat": 9, "priorit": 9, "singl": [9, 11], "thread": 9, "task": [9, 10, 11, 13], "mask": 9, "dma": 9, "enqueu": 9, "idl": 9, "lifo": 9, "soon": 9, "prioriti": [9, 11], "previous": [9, 10], "preserv": [9, 14], "preempt": 9, "newli": [9, 11, 12], "complet": [9, 11, 12], "higher": 9, "last": [9, 15], "highest": 9, "maintain": [10, 11, 13, 14], "intern": [10, 13], "pool": [10, 13], "object": [10, 14], "suffici": 10, "known": 10, "determin": [10, 11], "amount": 10, "runtim": 10, "necessari": [10, 12, 14], "spin": 10, "tabl": [10, 14], "multicor": 10, "0x0000": 10, "0x1000": [10, 12], "enough": [10, 11], "contigu": [10, 14], "reus": 10, "again": [10, 11, 13], "wonder": 10, "why": 10, "isn": 10, "inde": 10, "4kb": [10, 12], "half": [10, 11], "addit": [10, 11, 12, 14], "bookkeep": [10, 13], "fine": [10, 11, 13], "grain": [10, 11], "cut": 10, "chunk": [10, 11, 12], "ta": [10, 15], "deal": [10, 11], "problem": [10, 11, 12, 14], "unus": 10, "region": 10, "0x1000_0000": 10, "0x2000_0000": 10, "manag": [10, 12, 13, 14, 15], "algorithm": 10, "fragment": 10, "suitabl": [10, 13], "max": [10, 13], "larger": 10, "handl": [10, 11], "speak": 10, "construct": 10, "total": 10, "200kb": 10, "50": [10, 15], "0x0": [10, 12], "4k": 10, "live": 10, "mean": [10, 11, 12, 13, 14], "assign": [10, 13], "index": [10, 12, 13, 14], "idx": 10, "val": 10, "frames": 10, "geq": 10, "belong": 10, "directli": [10, 11, 12, 13], "view": [10, 11], "formula": 10, "4096": [10, 13], "expon": 10, "search": 10, "tri": 10, "far": [10, 12], "bottom": [10, 12], "until": [10, 14], "equal": 10, "naiv": 10, "xor": 10, "stop": [10, 13], "wrapper": 10, "common": [10, 12, 13], "48": [10, 12], "96": 10, "slot": 10, "round": [10, 11, 12], "nearest": 10, "unalloc": 10, "new": [10, 11, 13, 14], "caller": [10, 11], "prefix": 10, "freed": 10, "quick": 10, "feasibl": 10, "care": [10, 11, 13, 14], "must": [10, 11, 15], "techniqu": 10, "constant": 10, "logn": 10, "note": [10, 13], "mark": [10, 11, 12], "memory_reserv": 10, "chicken": 10, "egg": 10, "break": [10, 11], "dilemma": 10, "dedic": 10, "simpli": [10, 11], "lab2": 10, "etc": [10, 11, 12, 13], "hole": 10, "usabl": 10, "0x00": 10, "0x3c000000": 10, "devicetre": 10, "multitask": 11, "most": [11, 12, 13], "import": 11, "featur": 11, "moreov": 11, "independ": 11, "true": [11, 13], "parallel": 11, "element": 11, "isol": [11, 12], "capabl": 11, "instanc": [11, 13], "invok": 11, "illeg": 11, "fork": [11, 13], "shouldn": [11, 14], "variabl": 11, "indirect": 11, "sinc": [11, 13], "runnabl": 11, "pick": 11, "certain": [11, 12], "lock": 11, "mutex": 11, "effici": [11, 14], "meaning": 11, "remov": [11, 13], "awaken": 11, "eventu": 11, "voluntarili": 11, "reli": 11, "voluntari": 11, "onc": [11, 13], "never": [11, 12], "even": [11, 12, 15], "chanc": 11, "interrupt": 11, "over": 11, "handler": 11, "except": [11, 12, 13], "tricki": 11, "critic": 11, "arbitr": 11, "interleav": 11, "fortun": 11, "themselv": 11, "fault": 11, "blame": 11, "worri": 11, "contrari": 11, "meanwhil": 11, "race": 11, "awar": [11, 12], "adopt": 11, "complex": 11, "demonstr": 11, "successfulli": [11, 14], "creation": 11, "recycl": 11, "foo": 11, "robin": 11, "manner": 11, "switch_to": 11, "fp": [11, 14], "tpidr_el1": 11, "ret": [11, 13], "get_curr": 11, "prev": 11, "calle": 11, "guarante": [11, 12], "fetch": 11, "explicitli": 11, "implicitli": 11, "termin": [11, 12, 13], "dealloc": 11, "releas": [11, 13], "freeabl": 11, "dead": 11, "unix": [11, 12], "parent": 11, "account": 11, "zombi": 11, "child": [11, 12], "simplifi": 11, "ye": 11, "kill_zombi": 11, "reclaim": [11, 12], "equival": 11, "logic": 11, "expect": [11, 12], "result": [11, 13], "id": [11, 12, 13], "current_thread": 11, "delai": 11, "1000000": 11, "kernel_main": 11, "thread_creat": 11, "top": [11, 12, 13], "throw": 11, "affect": 11, "normal": [11, 12, 13, 14], "convent": 11, "acquir": 11, "paramet": 11, "transmit": 11, "fundament": 11, "getpid": 11, "uart_read": 11, "buf": [11, 13], "suppli": 11, "uart_writ": 11, "const": [11, 13], "written": [11, 13, 14], "exec": [11, 12, 13], "argv": 11, "standard": 11, "duplic": 11, "distinguish": 11, "mbox_cal": [11, 12, 13], "ch": 11, "mbox": [11, 13], "kill": [11, 12], "pid": 11, "prefer": [11, 13], "sure": [11, 15], "guidelin": 11, "via": 11, "uartread": [11, 13], "uartwrit": [11, 13], "worth": 11, "absolut": [11, 13], "preemptibl": 11, "level": [11, 14], "fork_test": 11, "nfork": 11, "get_pid": 11, "cnt": 11, "cur_sp": 11, "asm": 11, "ptr": 11, "els": [11, 12, 13], "core": 11, "pend": 11, "shift": 11, "equivil": 11, "uint64_t": [11, 12], "tmp": 11, "cntkctl_el1": 11, "obvious": 11, "el0": [11, 12], "hdmi": 11, "monitor": 11, "everyth": [11, 12], "goe": [11, 14], "snapshot": 11, "forth": 11, "everi": [11, 13], "perform": 11, "fluentli": [11, 12], "though": [11, 12], "asynchron": 11, "inter": 11, "outstand": 11, "answer": 11, "appropri": 11, "furthermor": 11, "ow": 11, "proce": 11, "sigreturn": 11, "prior": 11, "attach": [11, 14], "nest": 11, "testcas": 11, "meet": [11, 14], "sigkil": 11, "u": 11, "similarli": 11, "signal_kil": 11, "tid": 11, "interf": 12, "architectur": 12, "involv": 12, "hypervisor": 12, "pud": 12, "middl": 12, "pmd": 12, "pte": 12, "whose": 12, "phy": [12, 13], "ignor": [12, 13, 14], "47": 12, "01": 12, "invalid": 12, "54": 12, "unprivileg": 12, "53": 12, "el1": 12, "0b01": 12, "matter": 12, "linearli": 12, "0xffff_0000_0000_0000": 12, "elast": 12, "granul": 12, "Not": 12, "asid": 12, "1720": 12, "tutori": [12, 16], "guid": 12, "give": 12, "tcr_config_region_48bit": 12, "tcr_config_4kb": 12, "0b00": 12, "0b10": 12, "tcr_config_default": 12, "tcr_el1": 12, "polici": 12, "encod": [12, 14], "select": 12, "ngnrne": 12, "restrict": 12, "ram": 12, "gather": 12, "reorder": 12, "specul": 12, "mair_device_ngnrn": 12, "0b00000000": 12, "mair_normal_nocach": 12, "0b01000100": 12, "mair_idx_device_ngnrn": 12, "mair_idx_normal_nocach": 12, "mair_el1": 12, "1gb": 12, "0x3fffffff": [12, 13], "0x7fffffff": 12, "local": 12, "pd_tabl": 12, "0b11": 12, "pd_block": 12, "pd_access": 12, "boot_pgd_attr": 12, "boot_pud_attr": 12, "orr": 12, "1st": 12, "2nd": 12, "ttbr0_el1": 12, "sctlr_el1": 12, "symbol": 12, "0xffff000000000000": 12, "_kernel_start": 12, "built": 12, "ttbr1_el1": 12, "boot_rest": 12, "br": 12, "unalign": 12, "sometim": 12, "2mb": 12, "four": 12, "linear": 12, "fill": 12, "recommand": 12, "paget": 12, "va": 12, "alloc_pag": 12, "memset": 12, "mappag": 12, "pa": 12, "0xffffffffb000": 12, "0xfffffffff000": 12, "layer": [12, 14], "solv": 12, "barrier": 12, "tlb": 12, "old": 12, "stale": 12, "next_pgd": 12, "dsb": 12, "ish": 12, "ensur": 12, "tlbi": 12, "vmalle1i": 12, "invalidat": 12, "isb": 12, "pipelin": 12, "anonym": 12, "relat": 12, "heap": 12, "len": [12, 13], "prot": 12, "fd": [12, 13], "file_offset": 12, "hint": 12, "prot_non": 12, "prot_read": 12, "prot_writ": 12, "writabl": 12, "prot_exec": 12, "map_anonym": 12, "map_popul": 12, "region_map": 12, "pre": 12, "huge": 12, "kerenl": 12, "beggin": 12, "justifi": 12, "induc": 12, "destori": 12, "odd": 12, "statement": 12, "permiss": 12, "And": [12, 13], "rememb": [12, 13, 15], "remap": 12, "chlid": 12, "medium": [13, 14], "retriev": 13, "unifi": 13, "tmpf": 13, "across": 13, "hierarch": 13, "entiti": 13, "edg": 13, "concaten": 13, "path": 13, "pars": [13, 14], "travers": [13, 14], "graph": 13, "concret": 13, "shorten": 13, "abstract": 13, "class": 13, "underli": [13, 14], "delimit": 13, "simultan": 13, "w": [13, 14], "ve": [13, 14], "constraint": 13, "recommend": [13, 15], "assum": 13, "excc": 13, "charact": 13, "pathanm": 13, "255": 13, "rmdir": 13, "unlink": 13, "reusabl": 13, "struct": 13, "vnode_oper": 13, "v_op": 13, "file_oper": 13, "f_op": 13, "f_po": 13, "rw": 13, "setup_mount": 13, "file_nod": 13, "lseek64": 13, "whenc": 13, "dir_nod": 13, "component_nam": 13, "register_filesystem": 13, "vfs_open": 13, "o_creat": 13, "fail": 13, "vfs_close": 13, "vfs_write": 13, "vfs_read": 13, "min": 13, "noth": 13, "vfs_mkdir": 13, "vfs_mount": 13, "vfs_lookup": 13, "represent": 13, "regardless": 13, "updat": 13, "exce": 13, "reach": 13, "eof": 13, "subdirectori": 13, "cross": 13, "vnode_itr": 13, "next_vnod": 13, "wise": 13, "00000100": 13, "syscal": [13, 14], "where": 13, "src": 13, "17": 13, "chdir": 13, "uniqu": 13, "hack": 13, "weird": 13, "devf": 13, "uartf": 13, "framebufferf": 13, "stdin": 13, "stdout": 13, "stderr": 13, "hello": 13, "world": 13, "establish": 13, "vc": 13, "ioctl": 13, "lfb": 13, "reopen": 13, "info": 13, "18": 13, "seek": 13, "seek_set": 13, "19": 13, "fb": 13, "fb_info": 13, "o_wronli": 13, "framebuffer_info": 13, "isrgb": 13, "1024": 13, "768": 13, "mbox_request": 13, "mbox_ch_prop": 13, "mbox_tag_last": 13, "__attribute__": 13, "36": 13, "dimens": 13, "frame": [13, 14], "0x48003": 13, "wh": 13, "framebufferinfo": 13, "0x48004": 13, "virt": 13, "virtual_width": 13, "virtual_height": 13, "0x48009": 13, "x_offset": 13, "y": 13, "0x48005": 13, "20": [13, 14], "21": 13, "0x48006": 13, "22": 13, "23": 13, "24": 13, "0x40001": 13, "26": 13, "27": 13, "30": 13, "0x40008": 13, "33": 13, "34": 13, "exactli": 13, "closest": 13, "unabl": 13, "1024x768x32": 13, "cpio": [13, 14], "vfs1": 13, "rest": 13, "were": 14, "backup": 14, "broke": 14, "wide": 14, "extens": 14, "wa": 14, "invent": 14, "fix": 14, "nctuo": 14, "lab0": 14, "sfn_nctuo": 14, "choos": 14, "against": 14, "ex": 14, "renam": 14, "config": 14, "sd_init": 14, "readblock": 14, "writeblock": 14, "512": 14, "format": 14, "losetup": 14, "detach": 14, "msdo": 14, "dir": 14, "vfat": 14, "smallest": 14, "compos": 14, "mbr": 14, "2048": 14, "much": 14, "slower": 14, "shutdown": 14, "eject": 14, "categor": 14, "vf": 14, "spend": 14, "vnode": 14, "popul": 14, "super_oper": 14, "sync_f": 14, "close": 14, "poweroff": 14, "partial": 14, "vfs2": 14, "fat_r": 14, "insensit": 14, "conveni": 14, "filenam": 14, "fat_w": 14, "exercis": 15, "major": 15, "advanc": 15, "bonu": 15, "todo": 15, "year": [15, 17], "submiss": [15, 17], "semest": [15, 17], "plagiar": 15, "elabor": 15, "clearli": 15, "wrong": 15, "90": 15, "late": 15, "penalti": 15, "week": 15, "oscapston": [15, 17], "osc2024": 15, "merg": 15, "pr": 15, "evid": 15, "homework": 15, "experienc": 15, "commonli": 15, "made": 15, "mistak": 15, "github": [15, 16, 17], "repo": 15, "These": 16, "great": 16, "bztsrc": 16, "raspi3": 16, "matyukevich": 16, "rust": 16, "offic": 16, "wiki": 16, "elinux": 16, "rpi_hub": 16, "video": 16, "shorturl": 16, "imzz4": 16, "googl": 16, "folder": 16, "1vp43bgphms2dbwcbs1jgiv7quzrfde0x": 16, "usp": 16, "1puuwefg2az": 16, "ay1qg9dsvkmy30egavivm": 16, "nctu": 17, "spring": 17, "2020": 17, "grasslab": 17, "osdi": 17, "capston": 17, "2021": 17, "nycu_operating_system_capston": 17, "2022": 17, "osc2022": 17, "2023": 17, "pictur": 6}, "objects": {}, "objtypes": {}, "objnames": {}, "titleterms": {"staff": 0, "instructor": 0, "teach": 0, "assist": 0, "welcom": 1, "oper": 1, "system": [1, 10, 11, 13, 14], "capston": 1, "spring": 1, "2024": 1, "lectur": 1, "offic": 1, "hour": 1, "The": [2, 11], "assembli": 2, "you": 2, "need": 2, "lab": [2, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15], "0": [2, 6], "1": [2, 7, 8, 9, 10, 11, 12, 13, 14], "hardwar": [3, 7], "mailbox": [4, 7], "basic": [4, 7, 8, 9, 10, 11, 12, 13, 14], "tag": 4, "framebuff": [4, 13], "uart": [5, 7, 8, 9, 13], "background": [5, 8, 9, 10, 11, 12, 13, 14], "mmio": 5, "gpio": 5, "mini": [5, 7, 9], "initi": [5, 7, 8], "read": [5, 9, 13, 14], "data": [5, 10], "write": [5, 9, 12, 13, 14], "interrupt": [5, 9], "pl011": 5, "environ": 6, "setup": 6, "introduct": [6, 7, 8, 9, 10, 11, 12, 13, 14], "goal": [6, 7, 8, 9, 10, 11, 12, 13, 14], "thi": [6, 7, 8, 9, 10, 11, 12, 13, 14], "cross": 6, "platform": 6, "develop": 6, "compil": 6, "todo": [6, 7, 8, 9, 10, 11, 12], "linker": 6, "qemu": [6, 14], "from": 6, "sourc": [6, 9], "code": 6, "kernel": [6, 8, 11, 12], "imag": 6, "object": 6, "file": [6, 13, 14], "elf": 6, "check": 6, "deploi": 6, "real": 6, "rpi3": [6, 8, 9], "flash": 6, "bootabl": 6, "sd": [6, 14], "card": [6, 14], "interact": 6, "debug": 6, "hello": 7, "world": 7, "exercis": [7, 8, 9, 10, 11, 12, 13, 14], "20": [7, 9, 10], "2": [7, 8, 9, 10, 11, 12, 13, 14], "3": [7, 8, 9, 10, 12, 13], "simpl": [7, 8], "shell": 7, "4": [7, 10, 13], "get": [7, 14], "": [7, 9, 11, 12, 13], "inform": 7, "advanc": [7, 8, 9, 10, 11, 12, 13, 14], "reboot": 7, "30": [7, 8, 9, 10, 11, 12, 14], "boot": 8, "how": 8, "i": [8, 9], "load": 8, "bootload": 8, "config": 8, "set": 8, "ramdisk": 8, "new": [8, 12], "ascii": 8, "format": [8, 11, 12], "cpio": 8, "archiv": 8, "alloc": [8, 10, 12], "10": [8, 9, 10, 11, 12], "self": 8, "reloc": 8, "devicetre": 8, "pars": 8, "dtb": 8, "except": 9, "offici": 9, "refer": [9, 12], "level": [9, 12, 13], "handl": [9, 13], "vector": 9, "tabl": [9, 12, 13], "control": [9, 12], "critic": 9, "section": 9, "switch": [9, 11, 12], "el2": 9, "el1": 9, "el0": 9, "context": [9, 11, 12], "save": 9, "core": 9, "timer": [9, 11], "peripher": 9, "enabl": 9, "determin": 9, "asynchron": 9, "multiplex": 9, "hint": 9, "concurr": 9, "o": 9, "devic": [9, 13], "decoupl": 9, "handler": [9, 12], "nest": 9, "preemption": [9, 11], "reserv": 10, "memori": [10, 12, 14], "dynam": 10, "page": [10, 12], "frame": [10, 11, 12], "observ": 10, "buddi": 10, "40": [10, 11, 12, 14], "structur": [10, 13], "link": 10, "list": 10, "block": [10, 14], "differ": 10, "size": 10, "releas": 10, "redund": 10, "free": 10, "coalesc": 10, "find": 10, "merg": 10, "iter": 10, "effici": 10, "startup": 10, "5": 11, "thread": 11, "user": [11, 12], "process": [11, 12], "mmu": 11, "less": 11, "run": 11, "queue": 11, "wait": 11, "yield": 11, "creat": [11, 13, 14], "schedul": 11, "idl": 11, "end": 11, "test": [11, 13, 14], "call": [11, 13], "trap": 11, "requir": 11, "note": [11, 12], "video": [11, 12], "player": [11, 12], "program": 11, "posix": 11, "signal": 11, "implement": 11, "6": 12, "virtual": [12, 13], "terminologi": [12, 13], "translat": 12, "v": 12, "descriptor": [12, 13], "simplifi": 12, "attribut": 12, "us": 12, "aarch64": 12, "layout": 12, "configur": 12, "space": 12, "regist": 12, "tcr": 12, "indirect": 12, "mair": 12, "brief": 12, "ident": 12, "map": 12, "finer": 12, "granular": 12, "pgd": 12, "revisit": 12, "syscal": 12, "mmap": 12, "api": 12, "specif": 12, "region": 12, "fault": 12, "demand": 12, "copi": 12, "On": 12, "fork": 12, "when": 12, "either": 12, "children": 12, "parent": 12, "7": 13, "tree": 13, "vnode": 13, "compon": 13, "name": [13, 14], "root": 13, "35": 13, "registr": 13, "mount": [13, 14], "directori": [13, 14], "open": [13, 14], "method": 13, "close": 13, "lookup": [13, 14], "multi": 13, "vf": 13, "15": 13, "mkdir": 13, "anoth": 13, "pathnam": 13, "multitask": 13, "current": 13, "work": 13, "initramf": 13, "special": 13, "mknod": 13, "altern": 13, "dev": 13, "8": 14, "non": 14, "volatil": 14, "storag": 14, "fat": 14, "short": 14, "sfn": 14, "long": 14, "lfn": 14, "driver": 14, "linux": 14, "sector": 14, "cluster": 14, "partit": 14, "fat32": 14, "cach": 14, "metadata": 14, "entri": 14, "content": 14, "sync": 14, "overview": 15, "grade": 15, "polici": 15, "disclaim": 15, "extern": 16, "resours": 16, "old": 17, "cours": 17, "websit": 17}, "envversion": {"sphinx.domains.c": 3, "sphinx.domains.changeset": 1, "sphinx.domains.citation": 1, "sphinx.domains.cpp": 9, "sphinx.domains.index": 1, "sphinx.domains.javascript": 3, "sphinx.domains.math": 2, "sphinx.domains.python": 4, "sphinx.domains.rst": 2, "sphinx.domains.std": 2, "sphinx": 60}, "alltitles": {"Staff": [[0, "staff"]], "Instructor": [[0, "instructor"]], "Teaching assistants": [[0, "teaching-assistants"]], "Hardware": [[3, "hardware"]], "Mailbox": [[4, "mailbox"]], "Basics": [[4, "basics"]], "Tag": [[4, "tag"]], "Framebuffer": [[4, "framebuffer"]], "UART": [[5, "uart"]], "Background": [[5, "background"], [8, "background"], [9, "background"], [10, "background"], [11, "background"], [12, "background"], [13, "background"], [14, "background"]], "MMIO": [[5, "mmio"]], "GPIO": [[5, "gpio"]], "Mini UART": [[5, "mini-uart"]], "Initialization": [[5, "initialization"], [5, "id2"]], "Read data": [[5, "read-data"], [5, "id3"]], "Write data": [[5, "write-data"], [5, "id4"]], "Interrupt": [[5, "interrupt"], [5, "id5"]], "PL011 UART": [[5, "pl011-uart"]], "Introduction": [[7, "introduction"], [8, "introduction"], [9, "introduction"], [10, "introduction"], [11, "introduction"], [12, "introduction"], [13, "introduction"], [14, "introduction"], [6, "introduction"]], "Goals of this lab": [[7, "goals-of-this-lab"], [8, "goals-of-this-lab"], [9, "goals-of-this-lab"], [10, "goals-of-this-lab"], [11, "goals-of-this-lab"], [12, "goals-of-this-lab"], [13, "goals-of-this-lab"], [14, "goals-of-this-lab"], [6, "goals-of-this-lab"]], "Todo": [[7, null], [7, null], [7, null], [7, null], [7, null], [8, null], [8, null], [8, null], [8, null], [8, null], [8, null], [8, null], [9, null], [9, null], [9, null], [9, null], [9, null], [9, null], [9, null], [9, null], [9, null], [9, null], [10, null], [10, null], [10, null], [10, null], [10, null], [11, null], [11, null], [11, null], [12, null], [12, null], [12, null], [12, null], [12, null], [12, null], [12, null], [12, null], [12, null], [12, null], [12, null], [6, null], [6, null], [6, null], [6, null]], "Lab 1: Hello World": [[7, "lab-1-hello-world"]], "Basic Exercises": [[7, "basic-exercises"], [8, "basic-exercises"], [9, "basic-exercises"], [10, "basic-exercises"], [11, "basic-exercises"], [12, "basic-exercises"], [13, "basic-exercises"], [14, "basic-exercises"]], "Basic Exercise 1 - Basic Initialization - 20%": [[7, "basic-exercise-1-basic-initialization-20"]], "Basic Exercise 2 - Mini UART - 20%": [[7, "basic-exercise-2-mini-uart-20"]], "Basic Exercise 3 - Simple Shell - 20%": [[7, "basic-exercise-3-simple-shell-20"]], "Basic Exercise 4 - Mailbox - 20%": [[7, "basic-exercise-4-mailbox-20"]], "Get the hardware\u2019s information": [[7, "get-the-hardware-s-information"]], "Advanced Exercises": [[7, "advanced-exercises"], [8, "advanced-exercises"], [9, "advanced-exercises"], [10, "advanced-exercises"], [11, "advanced-exercises"], [12, "advanced-exercises"], [13, "advanced-exercises"], [14, "advanced-exercises"]], "Advanced Exercise 1 - Reboot - 30%": [[7, "advanced-exercise-1-reboot-30"]], "Lab 2: Booting": [[8, "lab-2-booting"]], "How a Kernel is Loaded on Rpi3": [[8, "how-a-kernel-is-loaded-on-rpi3"]], "Basic Exercise 1 - UART Bootloader - 30%": [[8, "basic-exercise-1-uart-bootloader-30"]], "Config Kernel Loading Setting": [[8, "config-kernel-loading-setting"]], "Basic Exercise 2 - Initial Ramdisk - 30%": [[8, "basic-exercise-2-initial-ramdisk-30"]], "New ASCII Format Cpio Archive": [[8, "new-ascii-format-cpio-archive"]], "Loading Cpio Archive": [[8, "loading-cpio-archive"]], "Basic Exercise 3 - Simple Allocator - 10%": [[8, "basic-exercise-3-simple-allocator-10"]], "Advanced Exercise 1 - Bootloader Self Relocation - 10%": [[8, "advanced-exercise-1-bootloader-self-relocation-10"]], "Advanced Exercise 2 - Devicetree - 30%": [[8, "advanced-exercise-2-devicetree-30"]], "Format": [[8, "format"]], "Parsing": [[8, "parsing"]], "Dtb Loading": [[8, "dtb-loading"]], "Lab 3: Exception and Interrupt": [[9, "lab-3-exception-and-interrupt"]], "Official Reference": [[9, "official-reference"]], "Exception Levels": [[9, "exception-levels"]], "Exception Handling": [[9, "exception-handling"], [9, "id2"]], "Vector Table": [[9, "vector-table"]], "Interrupts": [[9, "interrupts"]], "Interrupt Controllers": [[9, "interrupt-controllers"]], "Critical Sections": [[9, "critical-sections"]], "Basic Exercise 1 - Exception  - 30%": [[9, "basic-exercise-1-exception-30"]], "Exception Level Switch": [[9, "exception-level-switch"]], "EL2 to EL1": [[9, "el2-to-el1"]], "EL1 to EL0": [[9, "el1-to-el0"]], "EL0 to EL1": [[9, "el0-to-el1"]], "Context saving": [[9, "context-saving"]], "Basic Exercise 2 - Interrupt - 10%": [[9, "basic-exercise-2-interrupt-10"]], "Core Timer Interrupt": [[9, "core-timer-interrupt"]], "Basic Exercise 3 - Rpi3\u2019s Peripheral Interrupt - 30%": [[9, "basic-exercise-3-rpi3-s-peripheral-interrupt-30"]], "Enable mini UART\u2019s Interrupt.": [[9, "enable-mini-uart-s-interrupt"]], "Determine the Interrupt Source": [[9, "determine-the-interrupt-source"]], "Asynchronous Read and Write": [[9, "asynchronous-read-and-write"]], "Advanced Exercise 1 - Timer Multiplexing - 20%": [[9, "advanced-exercise-1-timer-multiplexing-20"]], "Hint": [[9, null]], "Advanced Exercise 2 - Concurrent I/O Devices Handling 20%": [[9, "advanced-exercise-2-concurrent-i-o-devices-handling-20"]], "Decouple the Interrupt Handlers": [[9, "decouple-the-interrupt-handlers"]], "Nested Interrupt": [[9, "nested-interrupt"]], "Preemption": [[9, "preemption"]], "Lab 4: Allocator": [[10, "lab-4-allocator"]], "Reserved Memory": [[10, "reserved-memory"]], "Dynamic Memory Allocator": [[10, "dynamic-memory-allocator"]], "Page Frame Allocator": [[10, "page-frame-allocator"]], "Observability of Allocators": [[10, "observability-of-allocators"]], "Basic Exercise 1 - Buddy System - 40%": [[10, "basic-exercise-1-buddy-system-40"]], "Data Structure": [[10, "data-structure"]], "Linked-lists for blocks with different size": [[10, "linked-lists-for-blocks-with-different-size"]], "Release redundant memory block": [[10, "release-redundant-memory-block"]], "Free and Coalesce Blocks": [[10, "free-and-coalesce-blocks"]], "Find the buddy": [[10, "find-the-buddy"]], "Merge iteratively": [[10, "merge-iteratively"]], "Basic Exercise 2 - Dynamic Memory Allocator - 30%": [[10, "basic-exercise-2-dynamic-memory-allocator-30"]], "Advanced Exercise 1 - Efficient Page Allocation - 10%": [[10, "advanced-exercise-1-efficient-page-allocation-10"]], "Advanced Exercise 2 - Reserved Memory - 10%": [[10, "advanced-exercise-2-reserved-memory-10"]], "Advanced Exercise 3 - Startup Allocation - 20%": [[10, "advanced-exercise-3-startup-allocation-20"]], "Lab 5: Thread and User Process": [[11, "lab-5-thread-and-user-process"]], "Threads": [[11, "threads"]], "User Process": [[11, "user-process"]], "MMU-less": [[11, "mmu-less"]], "Run Queue and Wait Queue": [[11, "run-queue-and-wait-queue"]], "Yield and Preemption": [[11, "yield-and-preemption"]], "Basic Exercise 1 - Thread - 10%": [[11, "basic-exercise-1-thread-10"]], "Creating a Thread": [[11, "creating-a-thread"]], "Scheduler and Context Switch": [[11, "scheduler-and-context-switch"]], "The Idle Thread": [[11, "the-idle-thread"]], "End of a Thread": [[11, "end-of-a-thread"]], "Test": [[11, "test"], [11, "id1"], [13, "test"], [14, "test"]], "Basic Exercise 2 - User Process and System Call - 30%": [[11, "basic-exercise-2-user-process-and-system-call-30"]], "Trap Frame": [[11, "trap-frame"]], "System Calls": [[11, "system-calls"]], "Required System Calls": [[11, "required-system-calls"]], "Note": [[11, null], [11, null], [11, null], [11, null], [12, null], [12, null], [12, null]], "System Call Format in Video Player\u2019s Test Program": [[11, "system-call-format-in-video-player-s-test-program"]], "Kernel Preemption": [[11, "kernel-preemption"]], "Video Player - 40%": [[11, "video-player-40"], [12, "video-player-40"]], "Timer": [[11, "timer"]], "User Program": [[11, "user-program"]], "Advanced Exercise 1 - POSIX Signal - 30%": [[11, "advanced-exercise-1-posix-signal-30"]], "Implementation": [[11, "implementation"]], "Lab 6: Virtual Memory": [[12, "lab-6-virtual-memory"]], "Terminology": [[12, "terminology"], [13, "terminology"]], "Translation Levels": [[12, "translation-levels"]], "Page v.s. Page Frame v.s. Page Table": [[12, "page-v-s-page-frame-v-s-page-table"]], "Page\u2019s Descriptor": [[12, "page-s-descriptor"]], "Descriptor\u2019s Format(simplified)": [[12, "descriptor-s-format-simplified"]], "Attributes Used in this Lab": [[12, "attributes-used-in-this-lab"]], "AArch64 memory layout": [[12, "aarch64-memory-layout"]], "Configuration": [[12, "configuration"]], "Reference": [[12, "reference"]], "Basic Exercise 1 - Virtual Memory in Kernel Space - 10%": [[12, "basic-exercise-1-virtual-memory-in-kernel-space-10"]], "Translation Control Register (TCR)": [[12, "translation-control-register-tcr"]], "Memory Attribute Indirection Register (MAIR)": [[12, "memory-attribute-indirection-register-mair"]], "Brief Introduction": [[12, "brief-introduction"]], "Used Memory Attributes": [[12, "used-memory-attributes"]], "Identity Paging": [[12, "identity-paging"]], "Map the Kernel Space": [[12, "map-the-kernel-space"]], "Finer Granularity Paging": [[12, "finer-granularity-paging"]], "Basic Exercise 2 - Virtual Memory in User Space - 30%": [[12, "basic-exercise-2-virtual-memory-in-user-space-30"]], "PGD Allocation": [[12, "pgd-allocation"]], "Map the User Space": [[12, "map-the-user-space"]], "Revisit Syscalls": [[12, "revisit-syscalls"]], "Context Switch": [[12, "context-switch"]], "Advanced Exercise 1 - Mmap - 10%": [[12, "advanced-exercise-1-mmap-10"]], "API Specification": [[12, "api-specification"]], "Region Page Mapping": [[12, "region-page-mapping"]], "Advanced Exercise 2 - Page Fault Handler & Demand Paging - 10%": [[12, "advanced-exercise-2-page-fault-handler-demand-paging-10"]], "Advanced Exercise 3 - Copy on Write - 10%": [[12, "advanced-exercise-3-copy-on-write-10"]], "On Fork a New Process": [[12, "on-fork-a-new-process"]], "When Either Children or Parent Write to that Page": [[12, "when-either-children-or-parent-write-to-that-page"]], "Lab 7: Virtual File System": [[13, "lab-7-virtual-file-system"]], "Tree Structure": [[13, "tree-structure"]], "File System": [[13, "file-system"]], "Vnode": [[13, "vnode"]], "Component Name": [[13, "component-name"]], "File Handle": [[13, "file-handle"]], "Basic Exercise 1 - Root File System - 35%": [[13, "basic-exercise-1-root-file-system-35"]], "File System Registration": [[13, "file-system-registration"]], "Mounting File System": [[13, "mounting-file-system"]], "Root directory\u2019s vnode": [[13, "root-directory-s-vnode"]], "Open Method": [[13, "open-method"]], "Close Method": [[13, "close-method"]], "Read Method": [[13, "read-method"]], "Write Method": [[13, "write-method"]], "Lookup Method": [[13, "lookup-method"]], "Create Method": [[13, "create-method"]], "Basic Exercise 2 - Multi-level VFS - 15%": [[13, "basic-exercise-2-multi-level-vfs-15"]], "Mkdir Method": [[13, "mkdir-method"]], "Mounting Another File System": [[13, "mounting-another-file-system"]], "Pathname Lookup": [[13, "pathname-lookup"]], "Basic Exercise 3 - Multitask VFS - 15%": [[13, "basic-exercise-3-multitask-vfs-15"]], "Current Working Directory": [[13, "current-working-directory"]], "File Descriptor Table": [[13, "file-descriptor-table"]], "System Calls for VFS": [[13, "system-calls-for-vfs"]], "Basic Exercise 4 - /initramfs - 15%": [[13, "basic-exercise-4-initramfs-15"]], "Special File": [[13, "special-file"]], "Device File Registration": [[13, "device-file-registration"]], "Mknod": [[13, "mknod"]], "Alternative": [[13, "alternative"]], "Advanced Exercises 1 - /dev/uart - 15%": [[13, "advanced-exercises-1-dev-uart-15"]], "Advanced Exercises 2 - /dev/framebuffer - 15%": [[13, "advanced-exercises-2-dev-framebuffer-15"]], "Lab 8: Non-volatile Storage": [[14, "lab-8-non-volatile-storage"]], "FAT File System": [[14, "fat-file-system"]], "Short File Names (SFN) and Long File Names (LFN)": [[14, "short-file-names-sfn-and-long-file-names-lfn"]], "SD Card": [[14, "sd-card"]], "SD Card Driver": [[14, "sd-card-driver"]], "SD Card on QEMU": [[14, "sd-card-on-qemu"]], "SD Card on Linux": [[14, "sd-card-on-linux"]], "Sector": [[14, "sector"]], "Block": [[14, "block"]], "Cluster": [[14, "cluster"]], "Get Partition": [[14, "get-partition"]], "Mount FAT32": [[14, "mount-fat32"]], "Basic Exercise 1 - Open and Read - 40%": [[14, "basic-exercise-1-open-and-read-40"]], "Lookup and Open": [[14, "lookup-and-open"]], "Read": [[14, "read"]], "Basic Exercise 2 - Create and Write - 30%": [[14, "basic-exercise-2-create-and-write-30"]], "Create": [[14, "create"]], "Write": [[14, "write"]], "Advanced Exercise 1 - Memory Cached SD Card - 40%": [[14, "advanced-exercise-1-memory-cached-sd-card-40"]], "File Metadata": [[14, "file-metadata"]], "Directory Entry": [[14, "directory-entry"]], "File Content": [[14, "file-content"]], "Sync": [[14, "sync"]], "Overview": [[15, "overview"]], "Labs": [[15, "labs"]], "Grading Policy": [[15, "grading-policy"]], "Disclaimer": [[15, "disclaimer"]], "External Resourses": [[16, "external-resourses"]], "Old Course Websites": [[17, "old-course-websites"]], "Welcome to Operating System Capstone, Spring 2024!": [[1, "welcome-to-operating-system-capstone-spring-2024"]], "Lecture and Office Hours": [[1, "lecture-and-office-hours"]], "The Assembly You Need": [[2, "the-assembly-you-need"]], "Lab 0": [[2, "lab-0"]], "Lab 1": [[2, "lab-1"]], "Lab 0: Environment Setup": [[6, "lab-0-environment-setup"]], "Cross-Platform Development": [[6, "cross-platform-development"]], "Cross Compiler": [[6, "cross-compiler"]], "Linker": [[6, "linker"]], "QEMU": [[6, "qemu"]], "From Source Code to Kernel Image": [[6, "from-source-code-to-kernel-image"]], "From Source Code to Object Files": [[6, "from-source-code-to-object-files"]], "From Object Files to ELF": [[6, "from-object-files-to-elf"]], "From ELF to Kernel Image": [[6, "from-elf-to-kernel-image"]], "Check on QEMU": [[6, "check-on-qemu"]], "Deploy to REAL Rpi3": [[6, "deploy-to-real-rpi3"]], "Flash Bootable Image to SD Card": [[6, "flash-bootable-image-to-sd-card"]], "Interact with Rpi3": [[6, "interact-with-rpi3"]], "Debugging": [[6, "debugging"]], "Debug on QEMU": [[6, "debug-on-qemu"]], "Debug on Real Rpi3": [[6, "debug-on-real-rpi3"]]}, "indexentries": {}})